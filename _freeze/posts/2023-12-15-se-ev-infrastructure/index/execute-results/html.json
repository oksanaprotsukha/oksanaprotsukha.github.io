{
  "hash": "50cd88c55496b86c08c27da1c6df19c9",
  "result": {
    "markdown": "---\ntitle: \"Impact of Socio-Economic Indicators on EV Charging Infrastructure\"\ndescription: \"Do inequality trends persist in EV charging network infrastructure?\"\nformat: html\neditor: visual\nauthor: \n  - name: Oksana Protsukha\n    url: https://oksanaprotsukha.github.io/portfolio/\n    affiliation: Master of Environmental Data Science Program\n    affiliation-url: https://ucsb-meds.github.io\ndate: 2023-12-15\ncategories: [Statistics, R, Energy, EV]\nimage: ev.jpeg\n---\n\n\n## **Overview**\n\nIn this analysis I explore inequality trends in electric vehicle (EV) charging network distribution in California. An earlier study from 2020 on this topic identified disparities across race and income in EV charging infrastructure \\[1\\]. However, we have seen a 136 % increase in new zero-emissions vehicle (ZEV) sales and 33 % increase in charging stations deployment in California since the study was published \\[2\\]. In my analysis I aim to identify whether the earlier trends of inequality in EV infrastructure deployment persist.\n\n### Research Question:\n\n### [Are electric vehicle charging stations less likely to be installed in low-income communities in comparison to higher-income ones?]{style=\"color:#2a9d8f; text-align: center;\"}\n\n### Significance\n\nLack of EV charging infrastructure is one of the primary barriers to EV adoption among the population. The Advanced Clean Cars II regulations mandate that all new vehicle sales in California should be ZEV by 2035 \\[3\\]. Equitable distribution of EV charging infrastructure is critical to prevent low income and disadvantaged communities from being left behind during the transition to a [green economy]{style=\"color:#2a9d8f;\"} in California.\n\n### Data\n\nI used the following two datasets in the analysis.\n\n#### Dataset 1: Alternative Fuels Data Center: Electric Vehicle Charging Station Locations.\n\nNational Renewable Energy Laboratory (NREL) maintains a comprehensive database of EV charging stations across the United States and Canada. It encompasses over 70 different attributes. Data is available to download via [API](https://developer.nrel.gov/docs/transportation/alt-fuel-stations-v1/all) \\[4\\].\n\n#### Dataset 2: The United States Environmental Protection Agency's EJScreen data.\n\nEJScreen stands for Environmental Justice Screening and Mapping Tool \\[5\\]. According to the developer's documentation \"EJSCREEN is an environmental justice mapping and screening tool that provides the U.S. Environmental Protection Agency (EPA) with a nationally consistent dataset and approach for combining environmental and demographic indicators.\" \\[6\\] It includes 12 environmental indicators, 6 demographic indicators and 12 EJ indexes. The scope of the analysis was limited to the the following two socio-economic indicators:\\\n- proximity traffic\\\n- low income indicators in the\\\n\nAdditional details and metadata are available on [EPA website](https://www.epa.gov/ejscreen/purposes-and-uses-ejscreen).\n\n### Problem Setup\n\n#### Scope\n\nThe scope of the analysis is limited to the state of California. The analysis did not include the differentiation between urban vs rural areas and didn't account for EV ownership.\n\n#### Assumptions\n\n-   census blocks with the ratio of 0.05% of level 2 or DC charging ports were identified as having EV charging available. This assumes there is at least 1 level 2 or DC charging port per 2000 people.\n-   level 1 charging ports alone were considered insufficient for public charging infrastructure to incentivize EV ownership.\n\n#### Terminology\n\n-   EV: electrical vehicle\\\n-   EV charging station: equipment that connects an electric vehicle (EV) to a source of electricity to recharge electric cars, neighborhood electric vehicles and plug-in hybrids.\\\n-   Charging port: the system within a charger that charges one EV. A charging port may have multiple connectors, but it can provide power to charge only one EV through one connector at a time. One charging station can have multiple ports.\\\n\n#### Method\n\n1.  Set up hypotheses: NULL and Alternative.\\\n2.  Perform data exploration to identify an optimal dependent variable.\\\n3.  Define statistical model\n\n-   Apply linear model with multi-beta parameters and check the model fit.\n-   Apply logistical (binary) model with multi-beta parameters if linear model fit is not suitable.\\\n\n### Limitations\n\n-   Parameters such as EV ownership, approvals process, grid infrastructure were not included in the analysis.\n-   Only income was used as a socio-economic indicator.\n\n## Analysis\n\n### Hypothesis\n\nThe analysis is based on the following hypotheses:\n\n**H0 (Null Hypothesis)**: Income level does not have an impact on EV charging infrastructure within a census block area, even when controlling for proximity to traffic.\n\n**HA (Alternative Hypothesis)**: The probability that EV charging infrastructure is available within a census block area with a higher level of low-income households is lower, even when controlling for proximity to traffic.\n\n### Setup\n\n\n::: {.cell}\n\n:::\n\n\nI used the following libraries throughout the analysis:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(httr)\nlibrary(jsonlite)\nlibrary(tidyverse)\nlibrary(broom)\nlibrary(readr)\nlibrary(gt)\nlibrary(openintro)\nlibrary(ggplot2)\nlibrary(modelr)\nlibrary(lterdatasampler)\nlibrary(sf)\nlibrary(dplyr)\nlibrary(maptiles)\nlibrary(kableExtra)\nlibrary(janitor)\nlibrary(patchwork)\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n### Data wrangling and exploration\n\nTo start, I downloaded the two datasets from NREL and EPA EJScreen (refer to the data section). Since both datasets had spacial attributes and no other attributes in common, I used spatial joins and subsetting to combine them into a single dataset. Following this, I converted the final dataset into a dataframe by eliminating geometries. This allows to enhance performance of the subsequent steps by reducing the number of datapoints to process.\n\n#### EV charging data import and wrangling:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\n# Get charging stations for California\n# Specify API endpoint and parameters\napi_url <- \"https://developer.nrel.gov/api/alt-fuel-stations/v1\"\n\napi_params <- list(\n  format = \"json\",  \n  api_key = api_key, \n  status = \"E\",  # E = charging stations in operation\n  access = \"public\",\n  fuel_type = \"ELEC\",\n  cng_vehicle_class = \"LD\", # LD = light duty vehicles\n  country = \"US\",\n  state = \"CA\",\n  limit = \"all\"\n)\n\n# Construct the full URL with parameters\nrequest_url <- modify_url(api_url, query = api_params)\n\n# Make a GET request to the API\nresponse <- GET(request_url)\n\n# Extract the fuel_stations data from the response\nfuel_stations_df <- content(response, \"parsed\")$fuel_stations\n\n# Convert the list to a dataframe\nfuel_stations_df <- as.data.frame(do.call(rbind, fuel_stations_df)) \n\n# Select the fields for analysis\nfuel_stations_df_clean <- fuel_stations_df %>% \n  filter(!is.na(fuel_type_code)) %>% \n  select('id', 'access_code','owner_type_code', 'open_date', 'restricted_access', 'maximum_vehicle_class','facility_type', 'city','state','zip','ev_workplace_charging', 'ev_level1_evse_num', 'ev_level2_evse_num', 'ev_dc_fast_num' , 'longitude', 'latitude')\n\n# Convert data frame to sf object\nfuel_stations_sf <- fuel_stations_df_clean %>%\n  st_as_sf(coords = c(\"longitude\", \"latitude\"), crs = 4326)\n\n# identify which points are outside the boundarie of California\ncalifornia_bbox <- st_bbox(c(xmin = -124.409591, ymin = 32.534156, \n                             xmax = -114.131211, ymax = 42.009518), \n                           crs = st_crs(fuel_stations_sf))\n\nca_ev_sf <- fuel_stations_sf %>% \n  st_set_crs(st_crs(california_bbox)) %>%  # Set CRS to the same as your data\n  st_crop(california_bbox)  # Crop to the bounding box of California\n```\n:::\n\n\n#### EJScreen data import and wrangling:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\n# read in geodatabase of EJScreen data at the Census Block Group level\nejscreen <- st_read(file.path(rootdir,'/data/EJSCREEN_2023_BG_StatePct_with_AS_CNMI_GU_VI.gdb/'))\nejscreen_meta <- st_read(file.path(rootdir, \"data/EJSCREEN_2023_BG_Columns.xlsx\"))\n\n# transform ejscreen into sf object\nejscreen_sf <- st_as_sf(ejscreen)\n\n# clean ejscreen\nejscreen_sf_clean <- ejscreen_sf %>% \n  select('ID', 'STATE_NAME', 'ST_ABBREV', 'CNTY_NAME', 'PTRAF', 'P_PTRAF', 'P_LOWINCPCT', 'LOWINCOME','LOWINCPCT', 'ACSTOTPOP', 'P_UNEMPPCT', 'P_PEOPCOLORPCT', 'P_UNEMPPCT', 'P_PNPL', 'P_PRMP', 'P_PTSDF') %>% \n  rename(census_block_id = 'ID') %>% \n  clean_names()\n\n# filter EJ to California state \nejscreen_ca_sf <- ejscreen_sf_clean %>% \n  filter(state_name == 'California')\n```\n:::\n\n::: {.cell}\n\n:::\n\n\nBefore proceeding to the modeling steps, I visualized the data to ensure that we are working with the accurate datasets.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-2.png){width=672}\n:::\n:::\n\n\n### Statistical Modeling\n\nIn order to proceed with the modeling, I added a new binary variable to the dataset to define whether a given census block had or didn't have EV charging available:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Set census blocks that have at least 0.05% of level 2 or DS ports per capita to 1, else to 0\nports_per_capita_clean_logit <- ports_per_capita_excl_level1_clean %>%\n  mutate(chargers_available_per_capita = case_when(\n    total_ports_capita_pct > 0.05 ~ 1,\n    total_ports_per_block <= 0.05 ~ 0\n  )) %>% \n  select(-id,-total_ports) %>% \n  na.omit\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table>\n<caption>EV Charging Availability per Census Block, California</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Census Block ID </th>\n   <th style=\"text-align:right;\"> Total Ports per Block </th>\n   <th style=\"text-align:right;\"> Total Ports Capita Pct </th>\n   <th style=\"text-align:right;\"> P_ptraf </th>\n   <th style=\"text-align:right;\"> P_lowincpct </th>\n   <th style=\"text-align:right;\"> EVSE Available </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 060014001001 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.0509424 </td>\n   <td style=\"text-align:right;\"> 27 </td>\n   <td style=\"text-align:right;\"> 26 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 060014001002 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.0000000 </td>\n   <td style=\"text-align:right;\"> 88 </td>\n   <td style=\"text-align:right;\"> 17 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 060014002001 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.0000000 </td>\n   <td style=\"text-align:right;\"> 91 </td>\n   <td style=\"text-align:right;\"> 8 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 060014002002 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.0000000 </td>\n   <td style=\"text-align:right;\"> 96 </td>\n   <td style=\"text-align:right;\"> 27 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 060014003001 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.0000000 </td>\n   <td style=\"text-align:right;\"> 93 </td>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 060014003002 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0.1232286 </td>\n   <td style=\"text-align:right;\"> 85 </td>\n   <td style=\"text-align:right;\"> 17 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n#### Basic data visualization\n\nTo visualize the distribution of EV infrastructure across the percentiles for low income and proximity to traffic, I used histogram:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nFrom the graphs, we observe a marginal decrease in available EV infrastructure as the percentile of low-income households within a census block increases. Additionally, there is a substantial increase in the availability of EV charging infrastructure with closer proximity to traffic.\\\n\nLet's run logarithmic regression to confirm whether out intuition is correct.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmod_ev_multi = glm(chargers_available_per_capita~p_lowincpct+p_ptraf, \n                   data = ports_per_capita_clean_logit, family = 'binomial')\n\ngg = ggplot(data = ports_per_capita_clean_logit, aes(x = p_lowincpct, y = chargers_available_per_capita)) +\n  geom_jitter(width = 0, height = 0.05, alpha = 0.8, size = 0.1) +\n  geom_smooth(method = 'lm', se = FALSE) +\n  theme_minimal()\n\nlog_g <- gg + \n  geom_smooth(method = 'glm', se = FALSE, color = 'red', \n              method.args = list(family = 'binomial')) +\n  labs(x = \"Low-Income Percentile\", y = \"EV Chargering Available\")\n```\n:::\n\n\n#### Interpretation:\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n::: {.cell-output-display}\nTable: Coefficients\n\n|term        |   estimate| std.error| statistic| p.value|\n|:-----------|----------:|---------:|---------:|-------:|\n|(Intercept) | -1.1574359| 0.0297992| -38.84114|       0|\n|p_lowincpct | -0.0054354| 0.0003901| -13.93333|       0|\n|p_ptraf     |  0.0191817| 0.0003982|  48.16514|       0|\n:::\n:::\n\n\n**Coefficients**:\n\n-   Intercept: according to the model, when both low income percent percentile and proximity to traffic percentile are zero, the estimated log-odds of EV infrastructure availability in a given census block is -1.15683. This intuitively makes sense, since we typically would not expect the need of EV charging (or it would be very low) if a census block is remote.\\\n\n-   p_lowincpct: this indicates that with 1 percentile increase in low-income percent percentile in a census block controlling for proximity to traffic percentile, we estimate -0.00549 change in log-odds of EV charging availability. Again, this makes sense and alignes with our Alternative Hypothesis. In general, we would expect few EV charging stations in low-income communities.\\\n\n-   p_ptraf: this indicates that with 1 percentile increase in proximity to traffic percentile in a census block controlling for low-income percent percentile, we estimate 0.01919 change in log-odds of EV charging availability. This alignes with our experience and intuition, since we usually expect more EV charging stations in close proximity to traffic.\n\n-   **p-value**: p-value is are well below 0.05 significance level, indicating high statistical significance of all the coefficients in predicting the availability of EV charging infrastructure. Therefore, we can **reject the Null Hypothesis** and conclude that there is a relationship between a low-income and ev charging infrastructure availability even when controlling for proximity to traffic.\n\n### Findings\n\nAccording to the regression results, we can conclude that the probability of having EV charging infrastructure in the census blocks with more low-income households is lower in comparison to higher income census blocks. However, the values of the coefficients are low and from the graphs we observe that there is a rather small gap in EV infrastructure availability based on income distribution.\n\nAdditional analysis is required to confirm the findings by including other variables in the model, such as race, unemployment, EV ownership ratio.\n\n### Attributions\n\nThe analysis was completed as part of the [Statistics for Environmental Data Science](https://tcarleton.github.io/EDS-222-stats/) coursework.\n\n### Citations\n\n\\[1\\] Hsu, Chih-Wei, and Kevin Fingerman. \"Public Electric Vehicle Charger Access Disparities across Race and Income in California.\" Transport Policy 100 (January 1, 2021): 59--67. https://doi.org/10.1016/j.tranpol.2020.10.003.\\\n\n\\[2\\] Commission, California Energy. \"ZEV and Infrastructure Stats Data.\" California Energy Commission. California Energy Commission, current-date. https://www.energy.ca.gov/files/zev-and-infrastructure-stats-data.\\\n\n\\[3\\] \"Advanced Clean Cars II \\| California Air Resources Board.\" Accessed November 10, 2023.https://ww2.arb.ca.gov/our-work/programs/advanced-clean-cars-program/advanced-clean-cars-ii.\\\n\n\\[4\\] All Stations API \\| NREL: Developer Network. https://developer.nrel.gov/docs/transportation/alt-fuel-stations-v1/all/. Accessed 15 Dec. 2023.\\\n\n\\[5\\] US EPA, OEJECR. Purposes and Uses of EJScreen. 20 Oct. 2014, https://www.epa.gov/ejscreen/purposes-and-uses-ejscreen.\\\n\n\\[6\\] EJSCREEN: Environmental Justice Screening and Mapping Tool \\| U.S. Climate Resilience Toolkit. https://toolkit.climate.gov/tool/ejscreen-environmental-justice-screening-and-mapping-tool#. Accessed 15 Dec. 2023.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}